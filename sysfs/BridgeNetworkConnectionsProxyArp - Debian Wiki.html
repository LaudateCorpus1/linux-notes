<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="https://wiki.debian.org/htdocs/favicon.ico">
<script type="text/javascript" src="BridgeNetworkConnectionsProxyArp%20-%20Debian%20Wiki_files/bugstatus.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="index,nofollow">

<title>BridgeNetworkConnectionsProxyArp - Debian Wiki</title>
<script type="text/javascript" src="BridgeNetworkConnectionsProxyArp%20-%20Debian%20Wiki_files/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="BridgeNetworkConnectionsProxyArp%20-%20Debian%20Wiki_files/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="BridgeNetworkConnectionsProxyArp%20-%20Debian%20Wiki_files/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="BridgeNetworkConnectionsProxyArp%20-%20Debian%20Wiki_files/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="BridgeNetworkConnectionsProxyArp%20-%20Debian%20Wiki_files/projection.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="BridgeNetworkConnectionsProxyArp%20-%20Debian%20Wiki_files/debian-wiki-1.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/htdocs/debwiki/css/msie.css">
<![endif]-->


<link rel="alternate" title="Debian Wiki: BridgeNetworkConnectionsProxyArp" href="https://wiki.debian.org/BridgeNetworkConnectionsProxyArp?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=BridgeNetworkConnectionsProxyArp&amp;ddiffs=1" type="application/rss+xml">


<link rel="Start" href="https://wiki.debian.org/FrontPage">
<link rel="Alternate" title="Wiki Markup" href="https://wiki.debian.org/BridgeNetworkConnectionsProxyArp?action=raw">
<link rel="Alternate" media="print" title="Print View" href="https://wiki.debian.org/BridgeNetworkConnectionsProxyArp?action=print">
<link rel="Search" href="https://wiki.debian.org/FindPage">
<link rel="Index" href="https://wiki.debian.org/TitleIndex">
<link rel="Glossary" href="https://wiki.debian.org/WordIndex">
<link rel="Help" href="https://wiki.debian.org/HelpOnFormatting">
</head>

<body dir="ltr" lang="en">
<div id="logo"><a href="https://www.debian.org/" title="Debian Homepage"><img src="BridgeNetworkConnectionsProxyArp%20-%20Debian%20Wiki_files/openlogo-50.png" alt="Debian" width="50" height="61"></a></div>
<div id="header">
<div id="wikisection">
<p class="section"><a href="https://wiki.debian.org/FrontPage" title="Debian Wiki Homepage">Wiki</a></p>
<div id="username"><a href="https://wiki.debian.org/BridgeNetworkConnectionsProxyArp?action=login" id="login" rel="nofollow">Login</a></div>
</div>
<div id="navbar">

<ul id="navibar">
<li class="wikilink"><a href="https://wiki.debian.org/FrontPage">FrontPage</a></li><li class="wikilink"><a href="https://wiki.debian.org/RecentChanges">RecentChanges</a></li><li class="wikilink"><a href="https://wiki.debian.org/FindPage">FindPage</a></li><li class="wikilink"><a href="https://wiki.debian.org/HelpContents">HelpContents</a></li><li class="current"><a href="https://wiki.debian.org/BridgeNetworkConnectionsProxyArp">BridgeNetwo...onsProxyArp</a></li>
</ul>

</div>

<form id="searchform" method="get" action="/BridgeNetworkConnectionsProxyArp">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput" style="display: none;">Search:</label>
<input id="searchinput" type="text" name="value" value="Search" size="20" onfocus="searchFocus(this)" onblur="searchBlur(this)" onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search" class="disabled">
<input id="titlesearch" name="titlesearch" type="submit" value="Titles" alt="Search Titles" disabled="disabled">
<input id="fullsearch" name="fullsearch" type="submit" value="Text" alt="Search Full Text" disabled="disabled">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<div id="logo"><a href="https://www.debian.org/" title="Debian Homepage"><img src="BridgeNetworkConnectionsProxyArp%20-%20Debian%20Wiki_files/openlogo-50.png" alt="Debian" width="50" height="61"></a></div>

<div id="breadcrumbs"><a href="https://wiki.debian.org/FrontPage" title="Debian Wiki Homepage">Wiki</a><span class="sep">/</span>

</div>

<ul class="editbar"><li><a href="https://wiki.debian.org/BridgeNetworkConnectionsProxyArp?action=login" id="login-1" rel="nofollow">Login</a></li><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onclick="toggleComments();return false;">Comments</a></li><li><a class="nbinfo" href="https://wiki.debian.org/BridgeNetworkConnectionsProxyArp?action=info" rel="nofollow">Info</a></li><li><a class="nbattachments" href="https://wiki.debian.org/BridgeNetworkConnectionsProxyArp?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="/BridgeNetworkConnectionsProxyArp">
<div>
    
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" selected="selected">More Actions:</option><option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="refresh">Delete Cache</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="RenamePage" disabled="disabled" class="disabled">Rename Page</option>
<option value="DeletePage" disabled="disabled" class="disabled">Delete Page</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="show" disabled="disabled" class="disabled">Subscribe User</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="show" disabled="disabled" class="disabled">Remove Spam</option>
<option value="show" disabled="disabled" class="disabled">Revert to this revision</option>
<option value="PackagePages">Package Pages</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="Load">Load</option>
<option value="Save">Save</option>
<option value="SlideShow">SlideShow</option>
    </select>
    
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

<h1 id="locationline">


<ul id="pagelocation">
<li><a href="https://wiki.debian.org/BridgeNetworkConnectionsProxyArp">BridgeNetworkConnectionsProxyArp</a></li>
</ul>

</h1>
</div>

<div id="page" dir="ltr" lang="en">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><p class="line867"><small><a href="https://wiki.debian.org/DebianWiki/EditorGuide#translation">Translation(s)</a>: English </small> <span class="anchor" id="line-3"></span></p><hr><p class="line874"> <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span></p><p class="line867">
</p><h1 id="Bridging_Network_Connections_with_Proxy_ARP">Bridging Network Connections with Proxy ARP</h1>
<span class="anchor" id="line-6"></span><p class="line867"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="#Bridging_Network_Connections_with_Proxy_ARP">Bridging Network Connections with Proxy ARP</a><ol><li>
<a href="#Introduction">Introduction</a></li><li>
<a href="#Summary">Summary</a><ol><li>
<a href="#DHCP_Relay">DHCP Relay</a></li><li>
<a href="#Automating_the_Process">Automating the Process</a></li></ol></li><li>
<a href="#Installing_the_software">Installing the software</a><ol><li>
<a href="#Known_Issue_with_RTL8188CUS_USB_Wifi_Adapter">Known Issue with RTL8188CUS USB Wifi Adapter</a></li></ol></li></ol></li></ol></div> <span class="anchor" id="line-7"></span>
<h2 id="Introduction">Introduction</h2>
<span class="anchor" id="line-8"></span><p class="line862">This document
 describes a means to bridge IP traffic between two interfaces using 
Proxy ARP, /32 host routes and standard Linux routing/forwarding. For a 
Layer 2 solution - an ethernet bridge - refer to <a href="https://wiki.debian.org/BridgeNetworkConnections">BridgeNetworkConnections</a>. <span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span></p><p class="line862">The
 benefit of using an IP / Layer 3 solution is that it will work when the
 outward-facing interface is a wireless ethernet client, without using 
WDS and without resorting to NAT. Simple Layer 2 bridging does not work 
in this case due to the vagaries of wireless AP client behaviour; <a class="http" href="http://www.smallnetbuilder.com/wireless/wireless-howto/31191-everything-you-need-to-know-about-wireless-bridging-and-repeating-part-1-wds">WDS may help</a> but AP support can be patchy. <span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span></p><p class="line874">Using
 Proxy ARP permits the bridged clients to be part of the existing 
network and supports bidirectional traffic, e.g. for a server or 
printer. DHCP and mDNS will also work using the appropriate helpers. <span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span></p><p class="line874">One
 scenario is connecting a wired network to a wireless LAN using a host 
that has both wifi (wlan0) and ethernet (eth0) interfaces. A specific 
example is using a Raspberry Pi with a USB wifi adapter to connect a 
wired-ethernet printer to the WLAN. No static configuration is required 
other than the wifi SSID and authentication for the Pi - the Pi and 
printer acquire DHCP addresses from the existing DHCP server, and the 
printer continues to be reachable via mDNS and otherwise operates as if 
it were patched to a wired port on the main network. <span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span></p><p class="line874">The
 term 'bridge' in this document refers to the host doing the proxy-arp 
and routing between the two networks, though keep in mind there is no 
layer 2 bridging involved. The 'outside' network is the existing network
 that hosts the DHCP server, gateway router, etc. The 'inside' network 
is the one with the hosts that need to be bridged and made to appear to 
be on the outside network. <span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span></p><p class="line867">
</p><h2 id="Summary">Summary</h2>
<span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line867"><a class="https" href="https://en.wikipedia.org/wiki/Proxy_ARP">Proxy ARP</a>
 is a technique by which a device on a given network answers the ARP 
queries for a network address that is not on that network, that is to 
make the hosts on one network appear to be logically part of a different
 physical network. <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span></p><p class="line874">The
 bridge host will proxy ARP requests from the inside network to the 
outside, and respond to ARPs from the outside network on behalf of 
inside hosts. Linux will only do this for hosts that are known via the 
routing table, so a /32 host route must be created pointing to the 
inside host (one for each inside host). The route is also required for 
IP forwarding to work, i.e. when IP traffic arrives after the ARP 
process has completed. <span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span></p><p class="line874">As an example, to manually configure and test this out where the primary LAN has a network address of 10.42.0.0/24: <span class="anchor" id="line-26"></span></p><ol type="1"><li>configure an inside client with a static IP of 10.42.0.11/24 <span class="anchor" id="line-27"></span></li><li>on the bridge: <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><pre><span class="anchor" id="line-1"></span>bridge# echo 1 &gt; /proc/sys/net/ipv4/conf/all/proxy_arp
<span class="anchor" id="line-2"></span>bridge# echo 1 &gt; /proc/sys/net/ipv4/ip_forward
<span class="anchor" id="line-3"></span>bridge# ip ro add 10.42.0.11/32 dev eth0</pre><span class="anchor" id="line-33"></span></li><li>ping from the inside host to an outside host, and examine the ARP table: <span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><pre><span class="anchor" id="line-1-1"></span>insidehost$ ping -c 1 10.42.0.2
<span class="anchor" id="line-2-1"></span>PING 10.42.0.2 (10.42.0.2) 56(84) bytes of data.
<span class="anchor" id="line-3-1"></span>64 bytes from 10.42.0.2: icmp_req=1 ttl=64 time=14.7 ms
<span class="anchor" id="line-4"></span>
<span class="anchor" id="line-5"></span>insidehost$ arp -n 10.42.0.2
<span class="anchor" id="line-6"></span>Address                  HWtype  HWaddress           Flags Mask            Iface
<span class="anchor" id="line-7"></span>10.42.0.2              ether   b8:27:eb:6b:52:b9   C                     eth0
<span class="anchor" id="line-8"></span># b8:27:eb:6b:52:b9 is the MAC of eth0 - the inside interface - on the bridge</pre><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><pre><span class="anchor" id="line-1-2"></span>bridge$ arp -n 10.42.0.2
<span class="anchor" id="line-2-2"></span>Address                  HWtype  HWaddress           Flags Mask            Iface
<span class="anchor" id="line-3-2"></span>10.42.0.2              ether   00:08:9b:be:f8:a2   C                     wlan0
<span class="anchor" id="line-4-1"></span># 00:08:9b:be:f8:a2 is the MAC of eth0 on the outside host
<span class="anchor" id="line-5-1"></span>
<span class="anchor" id="line-6-1"></span>bridge$ arp -n 10.42.0.11
<span class="anchor" id="line-7-1"></span>Address                  HWtype  HWaddress           Flags Mask            Iface
<span class="anchor" id="line-8-1"></span>10.42.0.11             ether   00:1b:a9:be:16:73   C                     eth0
<span class="anchor" id="line-9"></span>10.42.0.11                     (incomplete)                              wlan0
<span class="anchor" id="line-10"></span># 00:1b:a9:be:16:73 is the MAC of the inside host; the outside wlan0 entry if present should always be incomplete</pre><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><pre><span class="anchor" id="line-1-3"></span>outsidehost$ # arp -n 10.84.42.11
<span class="anchor" id="line-2-3"></span>Address                  HWtype  HWaddress           Flags Mask            Iface
<span class="anchor" id="line-3-3"></span>10.84.42.11             ether   00:e0:4c:10:3c:75   C                     eth0
<span class="anchor" id="line-4-2"></span># 00:e0:4c:10:3c:75 is the MAC of wlan0 on the bridge</pre><span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span></li></ol><p class="line874">Note
 that no IP address is required on the bridge's inside ethernet 
interface for proxy ARP to work (though see below re. DHCP relay). <span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span></p><p class="line874">If
 you run tcpdump on the bridge's ethernet and wlan interfaces, you'll 
see the ARP request from the inside host being proxied to the outside 
interface, with the ARP source being the bridge's outside-facing 
interface's MAC address. The ARP table on the inside hosts will show the
 bridge's inside interface MAC for all outside hosts, and similarly for 
outside hosts the MAC for all inside hosts will be the bridge's outside 
interface MAC. <span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span></p><p class="line867">
</p><h3 id="DHCP_Relay">DHCP Relay</h3>
<span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><p class="line862">DHCP is a Layer 2 protocol and can't traverse the Layer 3 'bridge' so we use the <a class="https" href="https://packages.debian.org/search?keywords=dhcp-helper">dhcp-helper</a>
 utility to listen for DHCP requests from the inside network and relay 
them to the DHCP server on the outside network. The relayed DHCP request
 will contain the IP address of the bridge's inside interface in order 
for the DHCP server to know which network to allocate an IP address for 
the new client from. We want the DHCP allocation to be from the same 
network as the outside LAN, the simplest implementation is to reflect 
the outside interface's IP address on to the inside interface. i.e. the 
bridge's inside and outside interfaces will have the same IP address; 
though the inside interface's network will be a host /32 netmask so as 
not to upset routing. <span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span></p><p class="line874">Alternatively
 the bridge inside interface can be assigned a static IP from the 
outside network, in which case the post-up step in 
/etc/network/interfaces configuration below can be omitted. <span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span></p><p class="line867">
</p><h3 id="Automating_the_Process">Automating the Process</h3>
<span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span><p class="line867"><a class="https" href="https://packages.debian.org/search?keywords=parprouted">parprouted</a>
 is designed to monitor the ARP table and both proxy ARP requests and 
install matching /32 host routes. Running parprouted with the inside and
 outside interfaces handles the ARP and routing completely 
automatically. Note that the kernel's proxy ARP mechanism 
(/proc/sys/net/ipv4/conf/all/proxy_arp) is not required. <span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span></p><p class="line874">parprouted does not handle packet forwarding nor DHCP or mDNS, so these features need to be enabled separately. <span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span></p><p class="line867">
</p><h2 id="Installing_the_software">Installing the software</h2>
<span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><p class="line874">The
 following assumes wlan0 is the already-configured outside interface, 
eth0 the unconfigured inside interface. Tested on Debian Wheezy 7.8 on 
2015-08-02, on armv6l (Raspberry Pi v1). <span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span></p><p class="line867"><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span></p><pre><span class="anchor" id="line-1-4"></span>bridge$ sudo apt-get install parprouted dhcp-helper avahi-daemon</pre><span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><p class="line874">Edit /etc/network/interfaces to configure the interfaces: <span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span></p><pre><span class="anchor" id="line-1-5"></span>auto lo
<span class="anchor" id="line-2-4"></span>iface lo inet loopback
<span class="anchor" id="line-3-4"></span>
<span class="anchor" id="line-4-3"></span>auto eth0
<span class="anchor" id="line-5-2"></span>allow-hotplug eth0
<span class="anchor" id="line-6-2"></span>iface eth0 inet manual
<span class="anchor" id="line-7-2"></span>
<span class="anchor" id="line-8-2"></span>auto wlan0
<span class="anchor" id="line-9-1"></span>allow-hotplug wlan0
<span class="anchor" id="line-10-1"></span>iface wlan0 inet dhcp
<span class="anchor" id="line-11"></span>wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
<span class="anchor" id="line-12"></span>  post-up /usr/sbin/parprouted eth0 wlan0
<span class="anchor" id="line-13"></span>  post-down /usr/bin/killall /usr/sbin/parprouted
<span class="anchor" id="line-14"></span>  # clone the dhcp-allocated IP to eth0 so dhcp-helper will relay for the correct subnet
<span class="anchor" id="line-15"></span>  post-up /sbin/ip addr add $(/sbin/ip addr show wlan0 | perl -wne 'm|^\s+inet (.*)/| &amp;&amp; print $1')/32 dev eth0
<span class="anchor" id="line-16"></span>  post-down /sbin/ifdown eth0</pre><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><p class="line874">Edit /etc/sysctl.d/local.conf to enable IP forwarding: <span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span></p><pre><span class="anchor" id="line-1-6"></span>net.ipv4.ip_forward=1</pre><span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><p class="line874">Enable DHCP relay: <span class="anchor" id="line-116"></span>/etc/default/dhcp-helper <span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span></p><pre><span class="anchor" id="line-1-7"></span># relay dhcp requests as broadcast to wlan0
<span class="anchor" id="line-2-5"></span>DHCPHELPER_OPTS="-b wlan0"</pre><span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><p class="line874">Edit /etc/avahi/avahi-daemon.conf to enable mDNS relaying: <span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span></p><pre><span class="anchor" id="line-1-8"></span>[reflector]
<span class="anchor" id="line-2-6"></span>enable-reflector=yes</pre><span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><p class="line874">Reboot, and hosts connected to the bridge's ethernet should acquire a DHCP address and have full IP connectivity! <span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span></p><p class="line867">
</p><h3 id="Known_Issue_with_RTL8188CUS_USB_Wifi_Adapter">Known Issue with RTL8188CUS USB Wifi Adapter</h3>
<span class="anchor" id="line-131"></span><p class="line874">Description
 of issue: When using an RTL8188CUS based wifi device, bridge 
connectivity is very unreliable and most ARP requests to the bridge's 
wlan address fail. This issue has minimal impact on a host that is 
configured as a normal client and primarily sending traffic but has a 
significant impact when the host is acting as a bridge. <span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span></p><p class="line874">Resolution: <span class="anchor" id="line-134"></span>Edit /etc/modprobe.d/8192cu.conf <span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span></p><pre><span class="anchor" id="line-1-9"></span># disable power management and USB suspend
<span class="anchor" id="line-2-7"></span>options 8192cu rtw_power_mgnt=0 rtw_enusbss=0</pre><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><p class="line867"></p><hr><p class="line874"> <span class="anchor" id="line-142"></span><a href="https://wiki.debian.org/CategoryNetwork">CategoryNetwork</a> <span class="anchor" id="line-143"></span><span class="anchor" id="bottom"></span></p></div><div id="pagebottom"></div>
</div>


<div id="footer">
<p id="pageinfo" class="info" dir="ltr" lang="en">BridgeNetworkConnectionsProxyArp  (<a class="nbinfo" href="https://wiki.debian.org/BridgeNetworkConnectionsProxyArp?action=info" rel="nofollow">last modified 2015-08-05 13:25:51</a>)</p>

<ul id="credits">
<li><a href="https://www.debian.org/legal/privacy">Debian privacy policy</a><br></li><li><a href="https://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="https://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li>Debian Wiki <a href="https://wiki.debian.org/Teams/DebianWiki">team</a>, <a href="https://bugs.debian.org/wiki.debian.org">bugs</a> and <a href="https://salsa.debian.org/debian/wiki.debian.org">config</a> available.</li><li>Hosting provided by <a href="https://www.man-da.de/">Metropolitan Area Network Darmstadt</a></li>
</ul>


</div>



</body></html>